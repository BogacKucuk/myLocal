package com.garantibbva.depositwithdrawalmngt.moneywithdrawbusiness.service.mapper;

import com.garanti.ark.base.utility.grpc.mapper.GrpcMapperConfig;
import com.garanti.branchinstructionmanagement.business.proto.v0.BranchInstruction.ReadBranchInstructionDepositWithdrawalRequest;
import com.garanti.branchinstructionmanagement.business.proto.v0.BranchInstruction.ReadBranchInstructionDepositWithdrawalResponse;
import com.garanti.branchinstructionmanagement.business.proto.v0.BranchInstruction.ReadBranchInstructionDepositWithdrawal;
import com.garantibbva.depositwithdrawalmngt.moneywithdrawbusiness.service.contract.model.request.DigitalOrderReadRequestDto;
import com.garantibbva.depositwithdrawalmngt.moneywithdrawbusiness.service.contract.model.response.DigitalOrderReadResponseDto;
import com.garantibbva.depositwithdrawalmngt.moneywithdrawbusiness.service.contract.model.response.ReadBranchInstructionDepositWithdrawalDto;
import org.mapstruct.Mapper;
import org.mapstruct.Mapping;
import org.mapstruct.NullValueCheckStrategy;
import org.mapstruct.NullValueMappingStrategy;
import org.mapstruct.NullValuePropertyMappingStrategy;
import org.mapstruct.factory.Mappers;

@Mapper(nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS,
    nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.SET_TO_DEFAULT,
    nullValueMappingStrategy = NullValueMappingStrategy.RETURN_DEFAULT,
    config = GrpcMapperConfig.class,
    uses = BigDecimalMapper.class)
public interface DigitalOrderMapper {

  DigitalOrderMapper INSTANCE = Mappers.getMapper(DigitalOrderMapper.class);

  ReadBranchInstructionDepositWithdrawalRequest toDigitalOrderGrpcRequest(
      DigitalOrderReadRequestDto requestDto);

  // Doğru field adıyla explicit mapping
  @Mapping(target = "readBranchInstructionDepositWithdrawal", 
           source = "readBranchInstructionDepositWithdrawalList")
  DigitalOrderReadResponseDto toResponseDto(
      ReadBranchInstructionDepositWithdrawalResponse grpcResponse);
  
  // Liste elemanları için mapping method
  ReadBranchInstructionDepositWithdrawalDto toReadBranchInstructionDepositWithdrawalDto(
      ReadBranchInstructionDepositWithdrawal grpcItem);
}
