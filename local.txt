package com.ykb.corebanking.tellerline.receiptbatch.service;

import com.ykb.corebanking.tellerline.receiptbatch.clients.dto.HesparAccountServiceDTO;
import com.ykb.corebanking.tellerline.receiptbatch.dto.ExpenseJobPrepareDTO;
import com.ykb.corebanking.tellerline.receiptbatch.request.RequestReceiptLogger;

import java.util.List;
import java.util.Map;

public interface IExpenseJobAccountService {

    List<ExpenseJobPrepareDTO> findAccountAndGetCommission(List<ExpenseJobPrepareDTO> clientList, Map<Integer, List<HesparAccountServiceDTO>> hesparAccountList, String currentPeriod, List<String> statusList);

    default void createBatchLogForAlert(IReceiptBatchLogService logger, Object object, Exception e) {
        RequestReceiptLogger request = new RequestReceiptLogger();
        request.setRequest(object);
        request.setLoggerName("pendingCompensateExpense");
        request.setMethodName("findAccountAndGetCommission");
        request.setServiceName("CommissionFromExpenseAccount");
        request.setLogMessage(e.getCause().toString().substring(0, Math.min(e.getCause().toString().length(), 4000)));
        logger.insertReceiptBatchLog(request);
    }
}
