// docsMap şu şekilde olacak:
// {
//    "1702 - Tüm Kimlikler": { parent: null, children: ["Ad Soyad", "İmza", "Tarih"] },
//    "Ad Soyad": { parent: "1702 - Tüm Kimlikler", children: [] },
//    "İmza": { parent: "1702 - Tüm Kimlikler", children: [] },
//    "Tarih": { parent: "1702 - Tüm Kimlikler", children: [] },
//    ...
// }

const generateDocsMap = (docsArray, parentKey = null, docsMap = {}) => {
  docsArray.forEach((doc) => {
    // Haritada bu doc için bir kayıt oluştur
    // eğer yoksa, varsayılan parent:null ve children:[]
    if (!docsMap[doc.key]) {
      docsMap[doc.key] = { parent: parentKey, children: [] };
    } else {
      // varsa sadece parent'ını set edelim
      docsMap[doc.key].parent = parentKey;
    }

    // Eğer parentKey varsa, parent'ın children dizisine bu doc'un key'ini ekle
    if (parentKey) {
      if (!docsMap[parentKey]) {
        docsMap[parentKey] = { parent: null, children: [] };
      }
      docsMap[parentKey].children.push(doc.key);
    }

    // Çocuklar varsa, rekurzif çağrı yaparak aynı işlemi onların üzerinde de yap
    if (doc.children && doc.children.length > 0) {
      generateDocsMap(doc.children, doc.key, docsMap);
    }
  });
  return docsMap;
};





const generateDocsMapWrapper = (response) => {
  let docsMap = {};
  if (response?.bbtDocuments?.length) {
    docsMap = generateDocsMap(response.bbtDocuments, null, docsMap);
  }
  if (response?.notExistsDocs?.length) {
    docsMap = generateDocsMap(response.notExistsDocs, null, docsMap);
  }
  return docsMap;
};
