package com.ykb.corebanking.vault.money.deposit.withdraw.controller;

import com.ykb.corebanking.vault.money.deposit.withdraw.exception.CashTrxnParameterException;
import com.ykb.corebanking.vault.money.deposit.withdraw.request.RequestCashTrxnCreateParameter;
import com.ykb.corebanking.vault.money.deposit.withdraw.request.RequestCashTrxnSearchParameter;
import com.ykb.corebanking.vault.money.deposit.withdraw.response.ResponseCashTrxnCreateParameter;
import com.ykb.corebanking.vault.money.deposit.withdraw.response.ResponseCashTrxnSearchParameter;
import jakarta.validation.Valid;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

import com.ykb.corebanking.vault.money.deposit.withdraw.dto.CashTrxnParameterDTO;
import com.ykb.corebanking.vault.money.deposit.withdraw.request.RequestCashTrxnInfoParameter;
import com.ykb.corebanking.vault.money.deposit.withdraw.response.ResponseCashTrxnInfoParameter;
import com.ykb.corebanking.vault.money.deposit.withdraw.service.impl.CashTrxnInfoParameterService;
import com.ykb.corebanking.vault.money.deposit.withdraw.service.impl.CashTrxnParameterService;

@RestController
@RequestMapping(path = "/parameter")
public class CashTrxnParameterController {
    @Autowired
    CashTrxnParameterService             cashTrxnParameterService;
    @Autowired
    private CashTrxnInfoParameterService cashTrxnInfoParameterService;

    @GetMapping("/info/getValue")
    public CashTrxnParameterDTO getCashTrxnInfoParameterWithCache(@RequestParam String parameterName) {
        return cashTrxnParameterService.getCashTrxnInfoParameterWithCache(parameterName);
    }

    @GetMapping("/system/getValue")
    public CashTrxnParameterDTO getCashTrxnSystemParameterWithCache(@RequestParam String parameterName) {
        return cashTrxnParameterService.getCashTrxnSystemParameterWithCache(parameterName);
    }

    @PostMapping("/getParameterValue")
    public ResponseCashTrxnInfoParameter getCashTrxnSystemParameter(@RequestBody RequestCashTrxnInfoParameter requestCashTrxnInfoParameter) {
        return cashTrxnInfoParameterService.getCashTrxnInfoParameter(requestCashTrxnInfoParameter);
    }

    @PostMapping("/search")
    public ResponseEntity<ResponseCashTrxnSearchParameter> searchCashTrxnParameter(@RequestBody RequestCashTrxnSearchParameter request) {
        return new ResponseEntity<>(cashTrxnParameterService.searchCashTrxnParameter(request), HttpStatus.OK);
    }

    @PostMapping("/create")
    public ResponseEntity<ResponseCashTrxnCreateParameter> createCashTrxnParameter(@Valid @RequestBody RequestCashTrxnCreateParameter request) throws CashTrxnParameterException {
        return new ResponseEntity<>(cashTrxnParameterService.createCashTrxnParameter(request), HttpStatus.OK);
    }

}


package com.ykb.corebanking.vault.money.deposit.withdraw.request;

import com.ykb.corebanking.vault.money.deposit.withdraw.dto.CashTrxnParameterDTO;
import jakarta.validation.Valid;
import lombok.Getter;
import lombok.Setter;

@Getter
@Setter
public class RequestCashTrxnCreateParameter {
    private String table;

    @Valid
    private CashTrxnParameterDTO parameterDTO;
}


package com.ykb.corebanking.vault.money.deposit.withdraw.dto;

import java.util.Date;

import lombok.Getter;
import lombok.Setter;

import javax.validation.constraints.NotBlank;

@Getter
@Setter
public class CashTrxnParameterDTO {

    @NotBlank(message = "Parametre adı boş olamaz")
    private String parameterName;

    @NotBlank(message = "Parametre açıklaması boş olamaz")
    private String description;

    @NotBlank(message = "Parametre değeri boş olamaz")
    private String value;

    private Date   startDate;
    private Date   expireDate;
    private String dataType;

}
